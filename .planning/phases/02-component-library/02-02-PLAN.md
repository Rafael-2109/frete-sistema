---
phase: 02-component-library
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/static/css/components/_cards.css
  - app/static/css/components/_badges.css
  - app/static/css/main.css
autonomous: true

must_haves:
  truths:
    - "Cards have surface-level background that adapts to theme (5% dark, 95% light)"
    - "Cards have subtle amber glow on hover"
    - "Card semantic variants (success, warning, danger) have colored left border"
    - "Badges are legible in both themes (contrast ratio 4.5:1+)"
    - "Badge outline variants have transparent background with colored border/text"
    - "Badge semantic colors auto-adjust brightness per theme"
  artifacts:
    - path: "app/static/css/components/_cards.css"
      provides: "Card component with header, body, footer, hover, and semantic variants"
      min_lines: 60
    - path: "app/static/css/components/_badges.css"
      provides: "Badge component with 8 colors, filled and outline variants"
      min_lines: 80
    - path: "app/static/css/main.css"
      provides: "Import statements for _cards.css and _badges.css"
      contains: "@import url('./components/_cards.css') layer(components)"
  key_links:
    - from: "app/static/css/main.css"
      to: "app/static/css/components/_cards.css"
      via: "@import with layer(components)"
      pattern: "@import.*_cards\\.css.*layer\\(components\\)"
    - from: "app/static/css/main.css"
      to: "app/static/css/components/_badges.css"
      via: "@import with layer(components)"
      pattern: "@import.*_badges\\.css.*layer\\(components\\)"
---

<objective>
Extract card and badge components from design-tokens into dedicated files

Purpose: Create reusable card and badge components with proper theming. Cards implement the 3-level elevation system (surface level) with semantic variants. Badges have filled and outlined variants with auto-adjusting luminosity for theme contrast.

Output: `app/static/css/components/_cards.css` and `app/static/css/components/_badges.css` imported into `main.css`
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-component-library/02-RESEARCH.md

## Phase Context (User Decisions)

**Card Requirements:**
- Background uses surface level: --bg (5% dark, 95% light)
- Semantic variants: card-success, card-warning, card-danger (colored left border)
- Hover effect: Subtle amber border glow
- Border: 1px solid var(--border), border-radius: var(--radius-lg)

**Badge Requirements:**
- Colors: Semantic fixed (success=green, warning=amber, danger=red, info=gray)
- Styles: Filled + Outlined
- Size: Single size
- Themes: Auto-adjust luminosity for WCAG 4.5:1 contrast

**Elevation System:**
- Background (page): --bg-dark (0% dark, 90% light)
- Surface (cards): --bg (5% dark, 95% light)
- Elevated (modals): --bg-light (10% dark, 100% light)

**Design Tokens Available:**
```css
--bg: hsl(0 0% 5%);           /* dark - card surface */
--bg: hsl(0 0% 95%);          /* light - card surface */
--bg-light: hsl(0 0% 10%);    /* dark - elevated */
--bg-light: hsl(0 0% 100%);   /* light - elevated */
--border: hsl(0 0% 30%);      /* dark */
--border: hsl(0 0% 80%);      /* light */
--radius-lg: 1rem;
--shadow: 0 2px 2px hsla(...);
--semantic-success: hsl(145 65% 40%);
--semantic-danger: hsl(0 70% 50%);
--amber-50: hsl(45 100% 50%);
```

## Reference Files
@app/static/css/tokens/_design-tokens.css (lines 289-320 for cards, 358-410 for badges)
@app/static/css/main.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create _cards.css component file</name>
  <files>app/static/css/components/_cards.css</files>
  <action>
Create `app/static/css/components/_cards.css` with the following structure:

1. **File header comment** explaining the card component and elevation level

2. **@layer components wrapper** - all styles inside this layer

3. **Base card styles** (.card):
   - CSS custom property API (--_card-bg, --_card-border, --_card-radius, --_card-shadow)
   - --_card-bg: var(--bg) - Surface level
   - --_card-border: var(--border)
   - --_card-radius: var(--radius-lg)
   - --_card-shadow: var(--shadow)
   - background: var(--_card-bg)
   - border: 1px solid var(--_card-border)
   - border-radius: var(--_card-radius)
   - box-shadow: var(--_card-shadow)
   - transition: border-color 0.2s, box-shadow 0.2s

4. **Card hover** using :where() for easy override:
   - :where(:hover) - border-color: var(--amber-50), box-shadow: 0 0 6px 1px hsla(50 100% 55% / 0.4)

5. **Card structure**:
   - .card-header: padding 1rem, border-bottom 1px solid var(--_card-border), background transparent, color var(--text)
   - .card-body: padding 1rem, color var(--text)
   - .card-footer: padding 1rem, border-top 1px solid var(--_card-border), background transparent

6. **Semantic variants** (border-left accent):
   - .card-success: border-left: 3px solid var(--semantic-success)
   - .card-warning: border-left: 3px solid var(--amber-50)
   - .card-danger: border-left: 3px solid var(--semantic-danger)
   - .card-info: border-left: 3px solid var(--border)

7. **Card title**:
   - .card-title: margin-bottom 0.5rem, font-weight 600, color var(--text)

**CRITICAL:** Do NOT use !important. The layer system handles specificity.
  </action>
  <verify>
Run: `cat app/static/css/components/_cards.css | head -30` to verify structure
Run: `grep -c "\.card" app/static/css/components/_cards.css` should return 10+ matches
Run: `grep "!important" app/static/css/components/_cards.css` should return 0 matches
  </verify>
  <done>
_cards.css exists with base card, hover, structure (header/body/footer), and semantic variants
  </done>
</task>

<task type="auto">
  <name>Task 2: Create _badges.css component file</name>
  <files>app/static/css/components/_badges.css</files>
  <action>
Create `app/static/css/components/_badges.css` with the following structure:

1. **File header comment** explaining badge theming approach

2. **@layer components wrapper** - all styles inside this layer

3. **Base badge styles** (.badge):
   - CSS custom property API (--_badge-bg, --_badge-color, --_badge-border)
   - font-weight: 500
   - font-size: 0.75rem
   - padding: 0.35em 0.65em
   - border-radius: var(--radius-sm)
   - display: inline-flex, align-items: center
   - line-height: 1

4. **Filled variants** - ALL 8 Bootstrap colors:
   - .badge-primary, .bg-primary: --_badge-bg: var(--amber-55), --_badge-color: hsl(0 0% 10%)
   - .badge-secondary, .bg-secondary: --_badge-bg: hsl(0 0% 40%), --_badge-color: white
   - .badge-success, .bg-success: --_badge-bg: var(--semantic-success), --_badge-color: white
   - .badge-danger, .bg-danger: --_badge-bg: var(--semantic-danger), --_badge-color: white
   - .badge-warning, .bg-warning: --_badge-bg: var(--amber-50), --_badge-color: hsl(0 0% 10%)
   - .badge-info, .bg-info: --_badge-bg: hsl(0 0% 45%), --_badge-color: white
   - .badge-light, .bg-light: --_badge-bg: var(--bg-light), --_badge-color: var(--text), border: 1px solid var(--border)
   - .badge-dark, .bg-dark: --_badge-bg: hsl(0 0% 20%), --_badge-color: hsl(0 0% 95%)

5. **Light mode adjustments** for better contrast:
   Use [data-bs-theme="light"] selector for badges that need adjustment:
   - .badge-success: slightly darker green (hsl(145 65% 35%))
   - .badge-warning: no change needed (amber is fine)
   - Keep 4.5:1 contrast ratio minimum

6. **Outline variants** (.badge-outline-*):
   - All 8 colors: primary, secondary, success, danger, warning, info, light, dark
   - background: transparent
   - color: semantic color token
   - border: 1px solid currentColor

   Example:
   ```css
   .badge-outline-success {
     --_badge-bg: transparent;
     --_badge-color: var(--semantic-success);
     --_badge-border: currentColor;
   }
   ```

   **Note on light/dark outline variants:**
   - .badge-outline-light: Uses var(--border) for visibility against dark backgrounds
   - .badge-outline-dark: Uses hsl(0 0% 20%) for visibility against light backgrounds

7. **Light mode outline adjustments**:
   [data-bs-theme="light"] .badge-outline-* may need darker text colors for contrast

**CRITICAL:** Do NOT use !important. The layer system handles specificity.
  </action>
  <verify>
Run: `cat app/static/css/components/_badges.css | head -30` to verify structure
Run: `grep -c "\.badge" app/static/css/components/_badges.css` should return 15+ matches
Run: `grep "!important" app/static/css/components/_badges.css` should return 0 matches
Run: `grep "badge-outline" app/static/css/components/_badges.css` - should match outline variants
  </verify>
  <done>
_badges.css exists with all 8 filled variants, outline variants, and light mode contrast adjustments
  </done>
</task>

<task type="auto">
  <name>Task 3: Import cards and badges into main.css</name>
  <files>app/static/css/main.css</files>
  <action>
Edit `app/static/css/main.css` to add imports for _cards.css and _badges.css.

In the Components section, add after any existing component imports:
```css
/* Components - Reusable UI patterns */
@import url('./components/_buttons.css') layer(components);
@import url('./components/_cards.css') layer(components);
@import url('./components/_badges.css') layer(components);
```

If buttons import was already added by 02-01 (parallel plan), just add cards and badges.

Ensure imports are:
1. After base layer imports
2. Before utilities layer imports
3. All using `layer(components)`
  </action>
  <verify>
Run: `grep "_cards.css\|_badges.css" app/static/css/main.css` - should show both imports
Run: `grep -c "layer(components)" app/static/css/main.css` - should return 3+ (buttons, cards, badges)
  </verify>
  <done>
main.css imports both _cards.css and _badges.css in the components layer
  </done>
</task>

<task type="auto">
  <name>Task 4: Remove card and badge styles from _design-tokens.css</name>
  <files>app/static/css/tokens/_design-tokens.css</files>
  <action>
In `app/static/css/tokens/_design-tokens.css`, remove:

1. **COMPONENTES - CARDS section** (starts ~line 289):
   ```css
   /* ═══════════════════════════════════════════════════════════════════════════
      COMPONENTES - CARDS
   ```
   Through the end of card-footer styles.

2. **COMPONENTES - BADGES section** (starts ~line 358):
   ```css
   /* ═══════════════════════════════════════════════════════════════════════════
      COMPONENTES - BADGES (HSL direto)
   ```
   Through the end of .badge.bg-light styles.

**Keep** the sections that come before and after:
- COMPONENTES - INPUTS (keep)
- COMPONENTES - TABLES (keep)

**Why:** Card and badge styles are now in components layer. Keeping them in tokens would create duplicates.
  </action>
  <verify>
Run: `grep -n "COMPONENTES - CARDS" app/static/css/tokens/_design-tokens.css` - should return nothing
Run: `grep -n "COMPONENTES - BADGES" app/static/css/tokens/_design-tokens.css` - should return nothing
Run: `grep -n "COMPONENTES - INPUTS" app/static/css/tokens/_design-tokens.css` - should still exist
Run: `grep -n "\.badge-success" app/static/css/tokens/_design-tokens.css` - should return nothing
  </verify>
  <done>
Card and badge component styles removed from _design-tokens.css, other sections preserved
  </done>
</task>

</tasks>

<verification>
1. **File structure**: _cards.css and _badges.css exist in components/
2. **Imports active**: Both files imported in main.css with layer(components)
3. **No duplicates**: Card and badge styles exist ONLY in component files, not in _design-tokens.css
4. **No !important**: Zero !important declarations in new component files
5. **Theme support**: Light mode adjustments present for badge contrast
</verification>

<success_criteria>
- [ ] _cards.css has 60+ lines with card component (base, hover, structure, variants)
- [ ] _badges.css has 80+ lines with badge component (8 colors filled, outline variants)
- [ ] main.css imports both files in components layer
- [ ] _design-tokens.css no longer has card or badge component styles
- [ ] Zero !important declarations in new component files
- [ ] Badge outline variants exist (badge-outline-success, etc.)
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-library/02-02-SUMMARY.md`
</output>
