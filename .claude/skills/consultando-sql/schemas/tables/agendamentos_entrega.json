{
  "name": "agendamentos_entrega",
  "description": "Agendamentos de entrega. Reagendamentos: GROUP BY entrega_id HAVING COUNT(*) > N. Campos: entrega_id, data_agendada, hora_agendada, forma_agendamento, status (aguardando, confirmado, etc.).",
  "fields": [
    {
      "name": "id",
      "type": "integer",
      "description": "Primary key"
    },
    {
      "name": "entrega_id",
      "type": "integer",
      "description": "FK → entregas_monitoradas.id"
    },
    {
      "name": "data_agendada",
      "type": "date"
    },
    {
      "name": "hora_agendada",
      "type": "time"
    },
    {
      "name": "forma_agendamento",
      "type": "varchar(50)",
      "description": "Portal, Telefone, etc."
    },
    {
      "name": "contato_agendamento",
      "type": "varchar(255)",
      "description": "login, telefone, e-mail"
    },
    {
      "name": "protocolo_agendamento",
      "type": "varchar(100)",
      "description": "número ou código"
    },
    {
      "name": "motivo",
      "type": "varchar(255)"
    },
    {
      "name": "observacao",
      "type": "text"
    },
    {
      "name": "autor",
      "type": "varchar(100)"
    },
    {
      "name": "criado_em",
      "type": "timestamp",
      "description": "Data de criação"
    },
    {
      "name": "status",
      "type": "varchar(20)",
      "description": "aguardando, confirmado (novos agendamentos aguardam por padrão)",
      "default": "aguardando"
    },
    {
      "name": "confirmado_por",
      "type": "varchar(100)"
    },
    {
      "name": "confirmado_em",
      "type": "timestamp"
    },
    {
      "name": "observacoes_confirmacao",
      "type": "text"
    }
  ],
  "foreign_keys": [
    {
      "column": "entrega_id",
      "references": "entregas_monitoradas.id"
    }
  ]
}