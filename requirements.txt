# ðŸš€ SISTEMA DE FRETES - REQUIREMENTS PRINCIPAL
# VersÃ£o com NLP integrado para melhor entendimento do usuÃ¡rio

# ==========================================
# CORE FRAMEWORK
# ==========================================
Flask==3.1.2
Flask-SQLAlchemy==3.1.1
Flask-Login==0.6.3
Flask-Migrate==4.1.0
Flask-Session==0.8.0
Flask-WTF==1.2.2
WTForms==3.2.1

# ==========================================
# DATABASE & DATA PROCESSING
# ==========================================
psycopg2-binary==2.9.11
SQLAlchemy==2.0.46             # patch (transitiva via Flask-SQLAlchemy)
Werkzeug==3.1.5                # patch (transitiva via Flask)
certifi>=2026.1.4              # CA roots atualizados (transitiva via requests)
pandas==3.0.0
openpyxl==3.1.5
# xlsxwriter removido - usando openpyxl com template
xlrd==2.0.2
xlwt==1.3.0
python-dateutil==2.9.0.post0
pytz==2025.2
requests==2.32.5
urllib3>=2.6.0             # CVE-2025-66418 (decompression bomb)

# ==========================================
# CLOUD & DEPLOYMENT
# ==========================================
gunicorn==25.1.0  # CVE-2024-6827 fix (HTTP smuggling)
greenlet==3.3.1  # CRÃTICO: VersÃ£o 3.1+ para Python 3.12+
gevent==25.9.1  # Atualizado para compatibilidade com greenlet
boto3==1.42.50
python-dotenv==1.2.1
psutil==7.2.2

# ==========================================
# CACHE & PERFORMANCE
# ==========================================
redis==7.2.0                # 5.0.8 â†’ 7.2.0 (API core compatÃ­vel, requer Python 3.10+)
rq==2.6.1                   # 1.16.2 â†’ 2.6.1 (Connection ctx removido, worker_ttl renomeado)
# rq-dashboard removido â€” abandonware (2020), nÃ£o importado no app, incompatÃ­vel com rq 2.x
APScheduler==3.11.2
whitenoise==6.11.0  # Serve arquivos estaticos com compressao e cache no WSGI layer
Flask-Compress==1.23  # Compressao gzip de respostas dinamicas (HTML, JSON)

# ==========================================
# VALIDATION
# ==========================================
dnspython==2.8.0
email-validator==2.3.0

# ==========================================
# AI & CLAUDE INTEGRATION
# ==========================================
anthropic==0.79.0           # API direta Anthropic (fallback)
claude-agent-sdk==0.1.39    # Claude Agent SDK oficial (0.1.39: ThinkingConfig, effort field nativo, CLI 2.1.49 bundled)
mcp>=1.26.0                 # Model Context Protocol (latest stable)
pydantic==2.12.5           # Data validation
anyio==4.12.1              # Async support

# ==========================================
# NLP PARA MELHOR ENTENDIMENTO (NOVO!)
# ==========================================
# Essas bibliotecas melhoram DRASTICAMENTE o entendimento:
# - CorreÃ§Ã£o ortogrÃ¡fica automÃ¡tica
# - Fuzzy matching (encontra "AssaÃ­" quando usuÃ¡rio digita "asai")
# - AnÃ¡lise sintÃ¡tica e semÃ¢ntica
# - DetecÃ§Ã£o de sinÃ´nimos

fuzzywuzzy==0.18.0         # Matching fuzzy de strings
rapidfuzz==3.14.3          # Substitui python-Levenshtein - mais rÃ¡pido e compatÃ­vel com Python 3.12+
# python-Levenshtein-wheels==0.13.2  # Alternativa se precisar manter Levenshtein
unidecode==1.4.0           # Remove acentos para comparaÃ§Ã£o

# NLTK Simplificado (apenas o essencial)
nltk==3.9.2                # Natural Language Toolkit

# Fuzzy matching adicional (necessÃ¡rio para entity_mapper)
jellyfish==1.2.1           # String matching algorithms

# SpaCy - Processamento AvanÃ§ado de Linguagem Natural
# spacy==3.7.4               # Engine principal de NLP
# IMPORTANTE: ApÃ³s instalar, execute:
# python -m spacy download pt_core_news_sm
# ou adicione no seu script de deploy:
# import spacy; spacy.cli.download("pt_core_news_sm")

# ==========================================
# MACHINE LEARNING (OPCIONAL)
# ==========================================
# scikit-learn==1.4.0      # Para prediÃ§Ãµes e clustering
# numpy==1.26.4           # ComputaÃ§Ã£o cientÃ­fica

# ==========================================
# VISUALIZAÃ‡ÃƒO (OPCIONAL)
# ==========================================
# plotly==5.20.0          # GrÃ¡ficos interativos
# matplotlib==3.8.3       # GrÃ¡ficos bÃ¡sicos
structlog==25.5.0  # VersÃ£o especÃ­fica para estabilidade
# Logging colorido
colorlog==6.10.1  # VersÃ£o especÃ­fica para estabilidade
PyJWT==2.11.0

fastapi==0.129.0
uvicorn[standard]==0.41.0
python-multipart==0.0.22
python-jose[cryptography]==3.5.0
httpx==0.28.1
# aioredis removido â€” deprecado (merged em redis-py 4.2+), nÃ£o importado no app
# python-json-logger removido â€” nÃ£o importado em nenhum arquivo do app (structlog+colorlog sÃ£o usados)
xlsxwriter==3.2.9

# ==========================================
# EMAIL PROCESSING
# ==========================================
extract-msg==0.55.0  # Para ler arquivos .msg e .eml do Outlook

# ==========================================
# PORTAL INTEGRATION - BROWSER AUTOMATION
# ==========================================
# Escolha uma das opÃ§Ãµes abaixo conforme necessidade:

# OpÃ§Ã£o 1: Selenium (para Chrome Debug Mode - RECOMENDADO)
selenium==4.40.0           # AutomaÃ§Ã£o browser (atualizado)
webdriver-manager==4.0.2   # Gerenciamento de drivers (atualizado)

# OpÃ§Ã£o 2: Playwright (alternativa moderna)
playwright==1.58.0         # AutomaÃ§Ã£o multi-browser (compatÃ­vel com greenlet 3.3+)
nest-asyncio==1.6.0        # Fix para Playwright Sync em loop asyncio

# DependÃªncias adicionais para portal
cryptography==46.0.5       # Criptografia de cookies/sessÃµes (OpenSSL patches)
# PyPDF2==3.0.1            # Removido - pypdf Ã© o sucessor
pdfplumber==0.11.9
pypdf==6.7.1

# ==========================================
# RASTREAMENTO GPS E QRCODE
# ==========================================
qrcode==8.2              # GeraÃ§Ã£o de QR Codes
pillow==12.1.1           # Processamento de imagens (CVE-2026-25990 fix)
haversine==2.9.0         # DistÃ¢ncia entre coordenadas GPS
# Geocoding agora usa Google Maps API (mesma do mapa_service.py)
weasyprint==68.1         # GeraÃ§Ã£o de PDFs

# ==========================================
# OCR / PDF PROCESSING (Comprovantes)
# ==========================================
pypdfium2==5.4.0           # RenderizaÃ§Ã£o de PDF para imagem (leitor comprovantes)
tesserocr==2.10.0          # OCR via Tesseract C API (requer tesseract-ocr no sistema)

# ==========================================
# EMBEDDINGS & VECTOR SEARCH
# ==========================================
voyageai>=0.3.0            # SDK Voyage AI (embeddings + reranking) â€” recomendado pela Anthropic
pgvector>=0.3.0            # Python bindings para pgvector (busca vetorial no PostgreSQL)