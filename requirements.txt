# üöÄ SISTEMA DE FRETES - REQUIREMENTS PRINCIPAL
# Vers√£o com NLP integrado para melhor entendimento do usu√°rio

# ==========================================
# CORE FRAMEWORK
# ==========================================
Flask==3.1.0
Flask-SQLAlchemy==3.1.1
Flask-Login==0.6.3
Flask-Migrate==4.1.0
Flask-Session==0.8.0
Flask-WTF==1.2.2
WTForms==3.2.1

# ==========================================
# DATABASE & DATA PROCESSING
# ==========================================
psycopg2-binary==2.9.10
pandas==2.2.3
openpyxl==3.1.5
# xlsxwriter removido - usando openpyxl com template
xlrd==2.0.1
xlwt==1.3.0
python-dateutil==2.9.0.post0
pytz==2025.2
requests==2.32.3

# ==========================================
# CLOUD & DEPLOYMENT
# ==========================================
gunicorn==23.0.0  # Atualizado para melhor compatibilidade
greenlet==3.1.1  # CR√çTICO: Vers√£o 3.1+ para Python 3.12+
gevent==24.11.1  # Atualizado para compatibilidade com greenlet
boto3==1.35.0
python-dotenv==1.1.0
psutil==5.9.6

# ==========================================
# CACHE & PERFORMANCE
# ==========================================
redis==5.0.8
rq==1.16.2  # Redis Queue para processamento em background (atualizado)
rq-dashboard==0.6.1  # Dashboard para monitorar jobs (opcional)
APScheduler==3.11.0
whitenoise==6.8.2  # Serve arquivos estaticos com compressao e cache no WSGI layer
Flask-Compress==1.17  # Compressao gzip de respostas dinamicas (HTML, JSON)

# ==========================================
# VALIDATION
# ==========================================
dnspython==2.7.0
email-validator==2.2.0

# ==========================================
# AI & CLAUDE INTEGRATION
# ==========================================
anthropic==0.77.0           # API direta Anthropic (fallback)
claude-agent-sdk==0.1.33    # Claude Agent SDK oficial (upgraded from 0.1.26 ‚Äî fix AssistantMessage.error, MCP annotations, new hooks)
mcp>=1.10.0                 # Model Context Protocol (latest stable)
pydantic==2.11.7           # Data validation
anyio==4.9.0               # Async support

# ==========================================
# NLP PARA MELHOR ENTENDIMENTO (NOVO!)
# ==========================================
# Essas bibliotecas melhoram DRASTICAMENTE o entendimento:
# - Corre√ß√£o ortogr√°fica autom√°tica
# - Fuzzy matching (encontra "Assa√≠" quando usu√°rio digita "asai")
# - An√°lise sint√°tica e sem√¢ntica
# - Detec√ß√£o de sin√¥nimos

fuzzywuzzy==0.18.0         # Matching fuzzy de strings
rapidfuzz==3.10.1          # Substitui python-Levenshtein - mais r√°pido e compat√≠vel com Python 3.12+
# python-Levenshtein-wheels==0.13.2  # Alternativa se precisar manter Levenshtein
unidecode==1.4.0           # Remove acentos para compara√ß√£o

# NLTK Simplificado (apenas o essencial)
nltk==3.8.1                # Natural Language Toolkit

# Fuzzy matching adicional (necess√°rio para entity_mapper)
jellyfish==1.1.0           # String matching algorithms

# SpaCy - Processamento Avan√ßado de Linguagem Natural
# spacy==3.7.4               # Engine principal de NLP
# IMPORTANTE: Ap√≥s instalar, execute:
# python -m spacy download pt_core_news_sm
# ou adicione no seu script de deploy:
# import spacy; spacy.cli.download("pt_core_news_sm")

# ==========================================
# MACHINE LEARNING (OPCIONAL)
# ==========================================
# scikit-learn==1.4.0      # Para predi√ß√µes e clustering
# numpy==1.26.4           # Computa√ß√£o cient√≠fica

# ==========================================
# VISUALIZA√á√ÉO (OPCIONAL)
# ==========================================
# plotly==5.20.0          # Gr√°ficos interativos
# matplotlib==3.8.3       # Gr√°ficos b√°sicos
structlog==24.4.0  # Vers√£o espec√≠fica para estabilidade
# Logging colorido
colorlog==6.8.2  # Vers√£o espec√≠fica para estabilidade
PyJWT==2.8.0

fastapi==0.115.5
uvicorn[standard]==0.32.1
python-multipart==0.0.14
python-jose[cryptography]==3.3.0
httpx==0.28.1
aioredis==2.0.1  # Para async Redis
python-json-logger==2.0.7  # Para JSON logging
xlsxwriter==3.2.5

# ==========================================
# EMAIL PROCESSING
# ==========================================
extract-msg==0.55.0  # Para ler arquivos .msg e .eml do Outlook

# ==========================================
# PORTAL INTEGRATION - BROWSER AUTOMATION
# ==========================================
# Escolha uma das op√ß√µes abaixo conforme necessidade:

# Op√ß√£o 1: Selenium (para Chrome Debug Mode - RECOMENDADO)
selenium==4.27.1           # Automa√ß√£o browser (atualizado)
webdriver-manager==4.0.2   # Gerenciamento de drivers (atualizado)

# Op√ß√£o 2: Playwright (alternativa moderna)
playwright==1.49.0         # Automa√ß√£o multi-browser (atualizado)
nest-asyncio==1.6.0        # Fix para Playwright Sync em loop asyncio

# Depend√™ncias adicionais para portal
cryptography==43.0.3       # Criptografia de cookies/sess√µes (atualizado para seguran√ßa)
# PyPDF2==3.0.1            # Removido - pypdf √© o sucessor
pdfplumber==0.11.7
pypdf==5.1.0

# ==========================================
# RASTREAMENTO GPS E QRCODE
# ==========================================
qrcode==8.0              # Gera√ß√£o de QR Codes
pillow==11.0.0           # Processamento de imagens (requerido por qrcode)
haversine==2.9.0         # Dist√¢ncia entre coordenadas GPS
# Geocoding agora usa Google Maps API (mesma do mapa_service.py)
weasyprint==67.0         # Gera√ß√£o de PDFs

# ==========================================
# OCR / PDF PROCESSING (Comprovantes)
# ==========================================
pypdfium2==5.1.0           # Renderiza√ß√£o de PDF para imagem (leitor comprovantes)
tesserocr==2.9.2           # OCR via Tesseract C API (requer tesseract-ocr no sistema)