/**
 * _bi.css - BI Module Overrides
 *
 * Component overrides specific to the BI module.
 * Contains Chart.js integration with theme-aware color tokens.
 *
 * Token mapping:
 * - Use var(--bg-light) for card backgrounds
 * - Use var(--text) for primary text
 * - Use var(--text-muted) for secondary text
 * - Use var(--border) for borders
 *
 * Chart-specific tokens (for JS to read via getComputedStyle):
 * - --chart-primary: Primary chart color (amber)
 * - --chart-secondary: Secondary chart color
 * - --chart-success: Success color for charts
 * - --chart-danger: Danger color for charts
 * - --chart-info: Info color for charts
 * - --chart-warning: Warning color for charts
 * - --chart-bg-primary: Primary chart background (transparent)
 * - --chart-bg-secondary: Secondary chart background
 *
 * Templates migrated: dashboard.html, transportadoras.html, regional.html, despesas.html
 */

@layer modules {

  /* ═══════════════════════════════════════════════════════════════════════════
     BI MODULE - Component overrides
     Migrated from template inline styles
     Templates: 4 total (with Chart.js visualizations)
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Chart color tokens for JS access via getComputedStyle */
  :root {
    /* Primary palette - amber based */
    --chart-primary: var(--amber-55);
    --chart-secondary: var(--amber-40);
    --chart-success: var(--semantic-success);
    --chart-danger: var(--semantic-danger);
    --chart-info: hsl(190 65% 45%);
    --chart-warning: hsl(35 95% 50%);

    /* Background fills with transparency */
    --chart-bg-primary: hsla(45 100% 50% / 0.1);
    --chart-bg-secondary: hsla(45 100% 50% / 0.05);

    /* Multi-series chart palette (5 distinct colors) */
    --chart-series-1: var(--amber-55);
    --chart-series-2: hsl(280 60% 55%);
    --chart-series-3: hsl(190 70% 50%);
    --chart-series-4: hsl(145 65% 45%);
    --chart-series-5: hsl(350 70% 55%);

    /* Region colors (for regional.html) */
    --chart-region-norte: hsl(145 65% 40%);
    --chart-region-nordeste: hsl(0 70% 50%);
    --chart-region-centro-oeste: hsl(35 90% 50%);
    --chart-region-sudeste: hsl(210 70% 50%);
    --chart-region-sul: hsl(280 50% 50%);

    /* Expense type colors (for despesas.html) */
    --chart-tipo-reentrega: hsl(0 70% 50%);
    --chart-tipo-tde: hsl(35 90% 50%);
    --chart-tipo-devolucao: hsl(280 50% 50%);
    --chart-tipo-complemento: hsl(210 70% 50%);
    --chart-tipo-outros: hsl(0 0% 60%);

    /* Sector colors (for despesas.html) */
    --chart-setor-comercial: hsl(210 70% 50%);
    --chart-setor-qualidade: hsl(145 65% 40%);
    --chart-setor-fiscal: hsl(280 50% 45%);
    --chart-setor-financeiro: hsl(35 90% 50%);
    --chart-setor-logistica: hsl(0 70% 50%);
    --chart-setor-compras: hsl(220 20% 30%);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     BI HEADER - Gradient header banner
     ═══════════════════════════════════════════════════════════════════════════ */

  .bi-header {
    background: linear-gradient(135deg, var(--amber-55) 0%, var(--amber-40) 100%);
    color: hsl(0 0% 10%);
    padding: 1rem;
    border-radius: var(--radius-lg);
    margin-bottom: 1.5rem;
  }

  .bi-header h4 {
    margin: 0;
    font-weight: 600;
  }

  .bi-header small {
    color: hsla(0 0% 10% / 0.8);
  }

  /* BI Header navigation */
  .bi-header .bi-nav a {
    color: hsla(0 0% 10% / 0.8);
    text-decoration: none;
    margin-right: 1rem;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
  }

  .bi-header .bi-nav a:hover {
    color: hsl(0 0% 10%);
    background: hsla(0 0% 100% / 0.2);
  }

  .bi-header .bi-nav a.active {
    color: hsl(0 0% 10%);
    background: hsla(0 0% 100% / 0.3);
    font-weight: 500;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     SECTION TITLE - Left border accent
     ═══════════════════════════════════════════════════════════════════════════ */

  .section-title {
    border-left: 4px solid var(--amber-55);
    padding-left: 10px;
    margin-bottom: 20px;
    color: var(--text);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     KPI CARDS - Dashboard metrics
     ═══════════════════════════════════════════════════════════════════════════ */

  .kpi-card {
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    transition: transform 0.2s;
    background: var(--bg-light);
    border: var(--border-card);
  }

  .kpi-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px hsla(0 0% 0% / 0.15);
  }

  .kpi-value {
    font-size: 2rem;
    font-weight: bold;
    color: var(--text);
  }

  .kpi-label {
    font-size: 0.9rem;
    color: var(--text-muted);
  }

  /* Variation indicators */
  .variation-positive {
    color: var(--semantic-success);
  }

  .variation-negative {
    color: var(--semantic-danger);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     CHART CONTAINER - Standard chart wrapper
     ═══════════════════════════════════════════════════════════════════════════ */

  .chart-container {
    position: relative;
    height: 300px;
    margin-top: 20px;
  }

  /* Taller chart container variant */
  .chart-container-tall {
    height: 350px;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     TRANSPORTADORAS - Score badges and cards
     ═══════════════════════════════════════════════════════════════════════════ */

  .score-badge {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    color: hsl(0 0% 100%);
  }

  .score-excellent { background: var(--semantic-success); }
  .score-good { background: hsl(210 70% 50%); }
  .score-regular { background: hsl(35 90% 50%); }
  .score-poor { background: var(--semantic-danger); }

  .transp-card {
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    transition: transform 0.2s;
    margin-bottom: 20px;
    background: var(--bg-light);
    border: var(--border-card);
  }

  .transp-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px hsla(0 0% 0% / 0.15);
  }

  .metric-value {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--text);
  }

  .metric-label {
    font-size: 0.85rem;
    color: var(--text-muted);
  }

  /* Ranking badges */
  .ranking-number {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 10px;
  }

  .ranking-1 { background: hsl(45 100% 50%); color: hsl(0 0% 10%); }
  .ranking-2 { background: hsl(0 0% 75%); color: hsl(0 0% 10%); }
  .ranking-3 { background: hsl(30 60% 45%); color: hsl(0 0% 100%); }
  .ranking-other { background: var(--text-muted); color: hsl(0 0% 100%); }

  /* Filter section */
  .filter-section {
    padding: 15px;
    border-radius: var(--radius-md);
    margin-bottom: 20px;
    background: var(--bg);
    border: var(--border-card);
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     REGIONAL - Map and region cards
     ═══════════════════════════════════════════════════════════════════════════ */

  #mapaBrasil {
    height: 500px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
  }

  .region-card {
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    transition: transform 0.2s;
    margin-bottom: 15px;
    background: var(--bg-light);
    border: var(--border-card);
  }

  .region-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px hsla(0 0% 0% / 0.15);
  }

  .region-header {
    padding: 15px;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    color: hsl(0 0% 100%);
    font-weight: bold;
  }

  .region-norte { background: var(--chart-region-norte); }
  .region-nordeste { background: var(--chart-region-nordeste); }
  .region-centro-oeste,
  .region-centrooeste { background: var(--chart-region-centro-oeste); }
  .region-sudeste { background: var(--chart-region-sudeste); }
  .region-sul { background: var(--chart-region-sul); }

  .metric-row {
    padding: 10px 15px;
    border-bottom: 1px solid var(--border);
  }

  .metric-row:last-child {
    border-bottom: none;
  }

  .uf-badge {
    display: inline-block;
    padding: 5px 10px;
    margin: 2px;
    border-radius: 15px;
    font-size: 0.85rem;
    background: var(--bg);
    color: var(--text);
  }

  /* Map legend */
  .legend-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    color: var(--text);
  }

  .legend-color {
    width: 20px;
    height: 20px;
    border-radius: 3px;
    margin-right: 10px;
  }

  /* Map cost legend colors */
  .legend-color-low { background: var(--chart-region-norte); }
  .legend-color-medium-low { background: var(--chart-region-sudeste); }
  .legend-color-medium { background: var(--chart-region-centro-oeste); }
  .legend-color-medium-high { background: hsl(25 85% 50%); }
  .legend-color-high { background: var(--chart-region-nordeste); }

  /* ═══════════════════════════════════════════════════════════════════════════
     DESPESAS - Expense type cards and sectors
     ═══════════════════════════════════════════════════════════════════════════ */

  .despesa-card {
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    transition: transform 0.2s;
    cursor: pointer;
    background: var(--bg-light);
    border: var(--border-card);
  }

  .despesa-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px hsla(0 0% 0% / 0.15);
  }

  .despesa-header {
    padding: 15px;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    color: hsl(0 0% 100%);
    font-weight: bold;
  }

  .tipo-reentrega { background: var(--chart-tipo-reentrega); }
  .tipo-tde { background: var(--chart-tipo-tde); }
  .tipo-devolucao { background: var(--chart-tipo-devolucao); }
  .tipo-complemento { background: var(--chart-tipo-complemento); }
  .tipo-outros { background: var(--chart-tipo-outros); }

  /* Sector badges */
  .setor-badge {
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 0.85rem;
    margin: 2px;
    display: inline-block;
    color: hsl(0 0% 100%);
  }

  .setor-comercial { background: var(--chart-setor-comercial); }
  .setor-qualidade { background: var(--chart-setor-qualidade); }
  .setor-fiscal { background: var(--chart-setor-fiscal); }
  .setor-financeiro { background: var(--chart-setor-financeiro); }
  .setor-logistica { background: var(--chart-setor-logistica); }
  .setor-compras { background: var(--chart-setor-compras); }

  /* Trend indicators */
  .trend-indicator {
    font-size: 1.2rem;
    font-weight: bold;
  }

  .trend-up { color: var(--semantic-danger); }
  .trend-down { color: var(--semantic-success); }
  .trend-stable { color: var(--text-muted); }

  /* Motivo pills */
  .motivo-pill {
    background: var(--bg);
    padding: 8px 12px;
    border-radius: 20px;
    margin: 3px;
    display: inline-block;
    font-size: 0.9rem;
    color: var(--text);
  }

  .table-motivos {
    font-size: 0.95rem;
  }

} /* End @layer modules */
