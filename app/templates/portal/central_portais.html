{% extends "base.html" %}

{% block title %}Central de Portais de Agendamento{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">
            <i class="fas fa-globe"></i> Central de Portais de Agendamento
        </h1>
        <div>
            <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#modalComoFunciona">
                <i class="fas fa-question-circle"></i> Como Funciona?
            </button>
            <a href="/carteira/" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Voltar ao Dashboard
            </a>
        </div>
    </div>

    <!-- Cards dos Portais -->
    <div class="row">
        <!-- Portal Atacad√£o -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-shopping-cart"></i> Portal Atacad√£o
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Status:</strong> <span class="badge bg-info">Ativo</span>
                    </p>
                    <p class="card-text">
                        Automa√ß√£o completa para agendamento de entregas no portal do Atacad√£o.
                    </p>
                    <div class="list-group list-group-flush mb-3">
                        <a href="/portal/atacadao/depara/" class="list-group-item list-group-item-action">
                            <i class="fas fa-barcode"></i> De-Para C√≥digos Atacad√£o
                            <small class="text-muted d-block">Mapeamento de c√≥digos internos para c√≥digos do portal</small>
                        </a>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    <small>
                        <i class="fas fa-link"></i> Portal: atacadao.hodiebooking.com.br
                    </small>
                </div>
            </div>
        </div>

        <!-- Portal Tenda -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-info">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-store"></i> Portal Tenda
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Status:</strong> <span class="badge bg-warning text-dark">Desenvolvimento</span>
                    </p>
                    <p class="card-text">
                        Sistema de agendamento integrado com o portal Agendar Entrega do Tenda.
                    </p>
                    <div class="list-group list-group-flush mb-3">
                        <a href="/portal/tenda/depara/ean" class="list-group-item list-group-item-action">
                            <i class="fas fa-barcode"></i> De-Para C√≥digos EAN
                            <small class="text-muted d-block">Mapeamento para c√≥digos de barras EAN</small>
                        </a>
                        <a href="/portal/tenda/depara/filiais" class="list-group-item list-group-item-action">
                            <i class="fas fa-map-marker-alt"></i> De-Para Filiais
                            <small class="text-muted d-block">Mapeamento de CNPJ para filiais</small>
                        </a>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    <small>
                        <i class="fas fa-link"></i> Portal: v1.agendarentrega.com
                    </small>
                </div>
            </div>
        </div>

        <!-- Portal Sendas -->
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-truck"></i> Portal Sendas/Assa√≠
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Status:</strong> <span class="badge bg-warning text-dark">Desenvolvimento</span>
                    </p>
                    <p class="card-text">
                        Sistema de agendamento integrado com o portal Trizy do Sendas/Assa√≠.
                    </p>
                    <div class="list-group list-group-flush mb-3">
                        <a href="/portal/sendas/sessao" class="list-group-item list-group-item-action">
                            <i class="fas fa-key text-danger"></i> <strong>Gerenciar Sess√£o/Cookies</strong>
                            <small class="text-muted d-block">Capturar e gerenciar cookies de acesso ao portal</small>
                        </a>
                        <a href="/portal/sendas/depara/produtos" class="list-group-item list-group-item-action">
                            <i class="fas fa-barcode"></i> De-Para C√≥digos Sendas
                            <small class="text-muted d-block">Mapeamento de c√≥digos de produtos</small>
                        </a>
                        <a href="/portal/sendas/depara/filiais" class="list-group-item list-group-item-action">
                            <i class="fas fa-store"></i> De-Para Filiais
                            <small class="text-muted d-block">Mapeamento de CNPJ para filiais</small>
                        </a>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    <small>
                        <i class="fas fa-link"></i> Portal: login.trizy.com.br
                    </small>
                </div>
            </div>
        </div>

    </div>

</div>

<!-- Modal Como Funciona -->
<div class="modal fade" id="modalComoFunciona" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title">
                    <i class="fas fa-question-circle"></i> Como Funciona a Automa√ß√£o de Portais?
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="accordion" id="accordionComoFunciona">
                    <!-- Demonstra√ß√£o Pr√°tica -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDemonstracao">
                                <i class="fas fa-play-circle me-2 text-danger"></i> <strong>DEMONSTRA√á√ÉO AO VIVO - Veja Como Funciona!</strong>
                            </button>
                        </h2>
                        <div id="collapseDemonstracao" class="accordion-collapse collapse show" data-bs-parent="#accordionComoFunciona">
                            <div class="accordion-body">
                                <div class="alert alert-info mb-4">
                                    <i class="fas fa-magic"></i> <strong>Veja a m√°gica acontecer!</strong> 
                                    Acompanhe um exemplo real de como o sistema faz um agendamento autom√°tico.
                                </div>

                                <!-- Exemplo Pr√°tico Passo a Passo -->
                                <div class="demo-container">
                                    <h5 class="text-primary mb-3">ü´í Exemplo Real: Agendamento de Azeitonas Campo Belo</h5>
                                    
                                    <!-- Passo 1 -->
                                    <div class="step-card mb-3 p-3 border rounded">
                                        <div class="d-flex align-items-start">
                                            <div class="step-number bg-primary text-white rounded-circle p-2 me-3" style="min-width: 40px; text-align: center;">1</div>
                                            <div class="flex-grow-1">
                                                <h6>Voc√™ clica em "Agendar no Portal"</h6>
                                                <div class="bg-light p-2 rounded mt-2">
                                                    <small class="text-muted">Sistema recebe dados reais:</small>
                                                    <pre class="mb-0"><code>Pedido: #932955
                                                        Cliente: Atacad√£o Campinas - CNPJ: 75.315.333/0085-02
                                                        Produto: 4320162 - AZEITONA VERDE FATIADA (30 caixas)
                                                        Data desejada: 28/08/2025</code>
                                                    </pre>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Passo 2 -->
                                    <div class="step-card mb-3 p-3 border rounded">
                                        <div class="d-flex align-items-start">
                                            <div class="step-number bg-warning text-dark rounded-circle p-2 me-3" style="min-width: 40px; text-align: center;">2</div>
                                            <div class="flex-grow-1">
                                                <h6>Sistema faz a "tradu√ß√£o" (De-Para)</h6>
                                                <div class="row mt-2">
                                                    <div class="col-md-5">
                                                        <div class="bg-danger text-white p-2 rounded">
                                                            <small>NOSSO SISTEMA</small>
                                                            <div>C√≥digo: <strong>4320162</strong></div>
                                                            <div class="small">AZEITONA VERDE FATIADA</div>
                                                            <div class="small">CX 6X2 KG - CAMPO BELO</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 text-center py-3">
                                                        <i class="fas fa-arrow-right fa-2x text-primary"></i>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="bg-success text-white p-2 rounded">
                                                            <small>PORTAL ATACAD√ÉO</small>
                                                            <div>EAN: <strong>17898075641576</strong></div>
                                                            <div>C√≥digo: <strong>35646</strong></div>
                                                            <div class="small">AZEITONA VERDE FATIADA</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="alert alert-info mt-2 mb-0">
                                                    <small><i class="fas fa-info-circle"></i> <strong>De-Para Real:</strong> O sistema converte automaticamente nosso c√≥digo interno (4320162) para o c√≥digo que o Atacad√£o reconhece (35646) e o EAN do produto (17898075641576)</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Passo 3 -->
                                    <div class="step-card mb-3 p-3 border rounded bg-light">
                                        <div class="d-flex align-items-start">
                                            <div class="step-number bg-info text-white rounded-circle p-2 me-3" style="min-width: 40px; text-align: center;">3</div>
                                            <div class="flex-grow-1">
                                                <h6>Rob√¥ entra em a√ß√£o (acontece em segundos!)</h6>
                                                <div class="automation-demo mt-3">
                                                    <!-- Simula√ß√£o Visual com C√≥digo Real -->
                                                    <div class="browser-mockup border rounded p-2 bg-white">
                                                        <div class="browser-header bg-secondary text-white p-1 rounded-top d-flex align-items-center">
                                                            <div class="browser-dots d-flex me-3">
                                                                <span class="dot bg-danger rounded-circle d-inline-block me-1" style="width: 12px; height: 12px;"></span>
                                                                <span class="dot bg-warning rounded-circle d-inline-block me-1" style="width: 12px; height: 12px;"></span>
                                                                <span class="dot bg-success rounded-circle d-inline-block" style="width: 12px; height: 12px;"></span>
                                                            </div>
                                                            <small>v1.agendarentrega.com (Portal Tenda)</small>
                                                        </div>
                                                        <div class="browser-content p-3">
                                                            <!-- Mostrando c√≥digo real do portal -->
                                                            <div class="code-demo mb-3">
                                                                <h6 class="text-primary mb-2">
                                                                    <i class="fas fa-code"></i> O que o rob√¥ "v√™" no portal:
                                                                </h6>
                                                                <div class="bg-dark text-light p-2 rounded" style="font-family: 'Courier New', monospace; font-size: 0.85rem;">
                                                                    <div class="mb-2">
                                                                        <span class="text-warning">// Selecionando tipo de remetente</span><br>
                                                                        <span class="text-info">&lt;select</span> <span class="text-success">id="tipoRemetente"</span><span class="text-info">&gt;</span><br>
                                                                        &nbsp;&nbsp;<span class="text-info">&lt;option</span> <span class="text-success">value="F"</span><span class="text-info">&gt;</span>Fornecedor<span class="text-info">&lt;/option&gt;</span><br>
                                                                        <span class="text-info">&lt;/select&gt;</span>
                                                                    </div>
                                                                    <div class="mb-2">
                                                                        <span class="text-warning">// Preenchendo CNPJ</span><br>
                                                                        <span class="text-info">&lt;input</span> <span class="text-success">id="fornecedor"</span> <span class="text-success">value="61.724.241/0003-30"</span><span class="text-info">/&gt;</span>
                                                                    </div>
                                                                    <div class="mb-2">
                                                                        <span class="text-warning">// Escolhendo local de entrega</span><br>
                                                                        <span class="text-info">&lt;select</span> <span class="text-success">id="selectPedido"</span><span class="text-info">&gt;</span><br>
                                                                        &nbsp;&nbsp;<span class="text-info">&lt;option&gt;</span>CT03 - AMOREIRAS<span class="text-info">&lt;/option&gt;</span><br>
                                                                        <span class="text-info">&lt;/select&gt;</span>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- A√ß√µes do rob√¥ em tempo real -->
                                                            <div class="typing-animation">
                                                                <h6 class="text-success mb-2">
                                                                    <i class="fas fa-robot"></i> A√ß√µes executadas automaticamente:
                                                                </h6>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.selectOption('#tipoRemetente', 'F')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.fill('#fornecedor', '61724241000330')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.click('.opcoes-clientes')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.selectOption('#veiculos', 'CARRETA')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.fill('#qtdVolume', '30')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step mb-2">
                                                                    <code class="text-primary">await page.click('button#confirmar')</code>
                                                                    <span class="ms-2">‚úÖ</span>
                                                                </div>
                                                                <div class="typing-step text-success fw-bold">
                                                                    <i class="fas fa-check-circle"></i> Protocolo capturado: AG-2508230014931
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Passo 4 - Resultado -->
                                    <div class="step-card p-3 border rounded bg-success text-white">
                                        <div class="d-flex align-items-start">
                                            <div class="step-number bg-white text-success rounded-circle p-2 me-3" style="min-width: 40px; text-align: center;">‚úì</div>
                                            <div class="flex-grow-1">
                                                <h6>Pronto! Agendamento Confirmado</h6>
                                                <div class="bg-white text-dark p-3 rounded mt-2">
                                                    <div class="row">
                                                        <div class="col-md-12 mb-2">
                                                            <strong>üì¶ Produto:</strong> AZEITONA VERDE FATIADA - 30 caixas (6x2 KG)
                                                        </div>
                                                        <div class="col-md-6">
                                                            <strong>üé´ Protocolo Gerado:</strong> AG-2508230014931
                                                        </div>
                                                        <div class="col-md-6">
                                                            <strong>‚è±Ô∏è Tempo Total:</strong> 45 segundos
                                                        </div>
                                                    </div>
                                                    <hr>
                                                    <small class="text-muted">
                                                        O protocolo foi salvo automaticamente no sistema e um e-mail de confirma√ß√£o foi enviado.
                                                        <br><strong>Peso Total:</strong> 360 kg (30 caixas x 12 kg)
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Compara√ß√£o Manual vs Autom√°tico -->
                                <div class="comparison-table mt-5">
                                    <h5 class="text-center mb-3">üìä Compara√ß√£o: Manual vs Autom√°tico</h5>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="card border-danger">
                                                <div class="card-header bg-danger text-white">
                                                    <i class="fas fa-user"></i> Processo Manual
                                                </div>
                                                <div class="card-body">
                                                    <ul class="list-unstyled">
                                                        <li>‚ùå Abrir o portal</li>
                                                        <li>‚ùå Fazer login</li>
                                                        <li>‚ùå Procurar c√≥digo correto</li>
                                                        <li>‚ùå Digitar informa√ß√µes</li>
                                                        <li>‚ùå Conferir dados</li>
                                                        <li>‚ùå Anotar protocolo</li>
                                                    </ul>
                                                    <div class="text-center">
                                                        <h4 class="text-danger">‚è±Ô∏è 10-15 minutos</h4>
                                                        <small>Por agendamento</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card border-success">
                                                <div class="card-header bg-success text-white">
                                                    <i class="fas fa-robot"></i> Processo Autom√°tico
                                                </div>
                                                <div class="card-body">
                                                    <ul class="list-unstyled">
                                                        <li>‚úÖ Um clique</li>
                                                        <li>‚úÖ Sistema faz tudo</li>
                                                        <li>‚úÖ Sem erros de digita√ß√£o</li>
                                                        <li>‚úÖ Protocolo salvo automaticamente</li>
                                                        <li>‚úÖ E-mail de confirma√ß√£o</li>
                                                        <li>‚úÖ Pode fazer v√°rios ao mesmo tempo</li>
                                                    </ul>
                                                    <div class="text-center">
                                                        <h4 class="text-success">‚è±Ô∏è 45 segundos</h4>
                                                        <small>Por agendamento</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vis√£o Geral -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVisaoGeral">
                                <i class="fas fa-eye me-2"></i> Vis√£o Geral
                            </button>
                        </h2>
                        <div id="collapseVisaoGeral" class="accordion-collapse collapse" data-bs-parent="#accordionComoFunciona">
                            <div class="accordion-body">
                                <p>
                                    Nossa automa√ß√£o de portais utiliza tecnologia de ponta para realizar agendamentos de forma 
                                    autom√°tica nos portais dos clientes, eliminando trabalho manual repetitivo e reduzindo erros.
                                </p>
                                <p>
                                    <strong>Como um rob√¥ navegador:</strong> O sistema age como se fosse voc√™ navegando no portal, 
                                    preenchendo formul√°rios e clicando em bot√µes, mas de forma muito mais r√°pida e precisa.
                                </p>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i> <strong>Benef√≠cios:</strong>
                                    <ul class="mb-0">
                                        <li>Redu√ß√£o de 95% no tempo de agendamento</li>
                                        <li>Elimina√ß√£o de erros de digita√ß√£o</li>
                                        <li>Padroniza√ß√£o do processo</li>
                                        <li>Registro autom√°tico de protocolos</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Como Funciona Tecnicamente -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTecnico">
                                <i class="fas fa-cogs me-2"></i> Detalhes T√©cnicos
                            </button>
                        </h2>
                        <div id="collapseTecnico" class="accordion-collapse collapse" data-bs-parent="#accordionComoFunciona">
                            <div class="accordion-body">
                                <h6>ü§ñ Tecnologia Playwright</h6>
                                <p>
                                    Utilizamos o <strong>Playwright</strong>, uma ferramenta desenvolvida pela Microsoft que controla 
                                    navegadores reais (Chrome, Firefox, Safari) de forma program√°tica.
                                </p>
                                
                                <h6>üîÑ Fluxo do Processo</h6>
                                <ol>
                                    <li><strong>Prepara√ß√£o:</strong> Sistema coleta dados da separa√ß√£o (produtos, quantidades, CNPJ)</li>
                                    <li><strong>De-Para:</strong> Converte c√≥digos internos para c√≥digos do portal</li>
                                    <li><strong>Navega√ß√£o:</strong> Abre navegador invis√≠vel e faz login no portal</li>
                                    <li><strong>Preenchimento:</strong> Preenche todos os campos necess√°rios</li>
                                    <li><strong>Confirma√ß√£o:</strong> Submete formul√°rio e captura protocolo</li>
                                    <li><strong>Registro:</strong> Salva protocolo no banco de dados</li>
                                </ol>

                                <h6>üìç Endpoints da API</h6>
                                <div class="bg-light p-2 rounded">
                                    <code>/portal/[cliente]/agendamento/preparar/[lote_id]</code> - Prepara agendamento<br>
                                    <code>/portal/[cliente]/agendamento/confirmar</code> - Executa no portal<br>
                                    <code>/portal/[cliente]/depara/api/buscar</code> - Consulta De-Para
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- De-Para Explicado -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDePara">
                                <i class="fas fa-exchange-alt me-2"></i> O que √© De-Para?
                            </button>
                        </h2>
                        <div id="collapseDePara" class="accordion-collapse collapse" data-bs-parent="#accordionComoFunciona">
                            <div class="accordion-body">
                                <p>
                                    <strong>De-Para</strong> √© um mapeamento que "traduz" informa√ß√µes do nosso sistema para o 
                                    formato esperado pelo portal do cliente.
                                </p>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header bg-light">
                                                <strong>De-Para de Produtos (Exemplos Reais)</strong>
                                            </div>
                                            <div class="card-body">
                                                <p class="mb-2"><strong>Convers√£o autom√°tica:</strong></p>
                                                <div class="table-responsive">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>Nosso C√≥digo</th>
                                                                <th>‚Üí</th>
                                                                <th>C√≥digo Portal</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>4320162</td>
                                                                <td>‚Üí</td>
                                                                <td>35646</td>
                                                            </tr>
                                                            <tr>
                                                                <td>4310162</td>
                                                                <td>‚Üí</td>
                                                                <td>35642</td>
                                                            </tr>
                                                            <tr>
                                                                <td>4360162</td>
                                                                <td>‚Üí</td>
                                                                <td>35645</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <small class="text-muted">
                                                    <strong>EAN:</strong> 17898075641576 (c√≥digo de barras)
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header bg-light">
                                                <strong>De-Para de Locais</strong>
                                            </div>
                                            <div class="card-body">
                                                <p>Mapeia CNPJ do cliente para:</p>
                                                <ul>
                                                    <li>Grupo Empresarial</li>
                                                    <li>Filial de entrega</li>
                                                </ul>
                                                <small class="text-muted">
                                                    Exemplo: 01157555000100 ‚Üí CT03 - AMOREIRAS
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Seguran√ßa -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeguranca">
                                <i class="fas fa-shield-alt me-2"></i> Seguran√ßa e Confiabilidade
                            </button>
                        </h2>
                        <div id="collapseSeguranca" class="accordion-collapse collapse" data-bs-parent="#accordionComoFunciona">
                            <div class="accordion-body">
                                <h6>üîí Medidas de Seguran√ßa</h6>
                                <ul>
                                    <li><strong>Credenciais Seguras:</strong> Senhas criptografadas no banco</li>
                                    <li><strong>Sess√µes Isoladas:</strong> Cada agendamento em sess√£o pr√≥pria</li>
                                    <li><strong>Logs Completos:</strong> Registro de todas as a√ß√µes</li>
                                    <li><strong>Retry Autom√°tico:</strong> Tenta novamente em caso de falha</li>
                                </ul>

                                <h6>‚úÖ Valida√ß√µes</h6>
                                <ul>
                                    <li>Verifica se todos os produtos t√™m De-Para</li>
                                    <li>Valida CNPJ e local de entrega</li>
                                    <li>Confirma protocolo antes de finalizar</li>
                                    <li>Detecta e reporta erros do portal</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>

<!-- Estilos para anima√ß√µes e visual melhorado -->
<style>
    /* Anima√ß√£o de digita√ß√£o */
    @keyframes typing {
        from { opacity: 0; transform: translateX(-10px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    .typing-step {
        animation: typing 0.5s ease-in-out;
        animation-fill-mode: both;
    }
    
    .typing-step:nth-child(1) { animation-delay: 0.5s; }
    .typing-step:nth-child(2) { animation-delay: 1s; }
    .typing-step:nth-child(3) { animation-delay: 1.5s; }
    .typing-step:nth-child(4) { animation-delay: 2s; }
    .typing-step:nth-child(5) { animation-delay: 2.5s; }
    .typing-step:nth-child(6) { animation-delay: 3s; }
    .typing-step:nth-child(7) { animation-delay: 3.5s; }
    
    /* Anima√ß√£o de pulso para n√∫meros dos passos */
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .step-number {
        animation: pulse 2s infinite;
    }
    
    /* Hover effects nos cards de passo */
    .step-card {
        transition: all 0.3s ease;
    }
    
    .step-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    /* Browser mockup mais realista */
    .browser-mockup {
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .browser-dots span {
        transition: all 0.3s ease;
    }
    
    .browser-mockup:hover .browser-dots span {
        transform: scale(1.2);
    }
    
    /* Anima√ß√£o de c√≥digo sendo digitado */
    @keyframes codeAppear {
        from {
            opacity: 0;
            background-color: hsl(60, 100%, 50%);
        }
        to {
            opacity: 1;
            background-color: transparent;
        }
    }
    
    .code-highlight {
        animation: codeAppear 1s ease;
    }
    
    /* Seta animada */
    @keyframes arrowMove {
        0%, 100% { transform: translateX(0); }
        50% { transform: translateX(10px); }
    }
    
    .fa-arrow-right {
        animation: arrowMove 2s infinite;
    }
    
    /* Cards de compara√ß√£o com hover */
    .comparison-table .card {
        transition: all 0.3s ease;
    }
    
    .comparison-table .card:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    /* Destaque no accordion ativo */
    .accordion-button:not(.collapsed) {
        background-color: hsla(207, 89%, 86%, 0.5);
        color: hsl(210, 79%, 46%);
        font-weight: bold;
    }
    
    /* Smooth scroll para demonstra√ß√£o */
    .demo-container {
        scroll-behavior: smooth;
    }
    
    /* Badge animado para "AO VIVO" */
    @keyframes live {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .badge-live {
        background-color: hsl(0, 100%, 50%);
        color: var(--bg-light);
        animation: live 1.5s infinite;
    }
</style>

<!-- Script para efeitos interativos -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Adicionar efeito de digita√ß√£o ao abrir a demonstra√ß√£o
    const demoAccordion = document.getElementById('collapseDemonstracao');
    
    if (demoAccordion) {
        demoAccordion.addEventListener('shown.bs.collapse', function () {
            // Reiniciar anima√ß√µes quando abrir
            const typingSteps = document.querySelectorAll('.typing-step');
            typingSteps.forEach((step, index) => {
                step.style.animation = 'none';
                setTimeout(() => {
                    step.style.animation = '';
                }, 100 * index);
            });
        });
    }
    
    // Highlight de c√≥digo ao passar o mouse
    const codeBlocks = document.querySelectorAll('.bg-dark.text-light div');
    codeBlocks.forEach(block => {
        block.addEventListener('mouseenter', function() {
            this.classList.add('code-highlight');
        });
        
        block.addEventListener('mouseleave', function() {
            setTimeout(() => {
                this.classList.remove('code-highlight');
            }, 500);
        });
    });
    
    // Simular cliques nos steps ao clicar
    const stepCards = document.querySelectorAll('.step-card');
    stepCards.forEach(card => {
        card.style.cursor = 'pointer';
        card.addEventListener('click', function() {
            // Adicionar efeito de sele√ß√£o
            stepCards.forEach(c => c.classList.remove('border-primary', 'shadow'));
            this.classList.add('border-primary', 'shadow');
            
            // Se for o √∫ltimo step, mostrar efeito de sucesso
            if (this.querySelector('.step-number').textContent === '‚úì') {
                this.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
            }
        });
    });
});
</script>

{% endblock %}